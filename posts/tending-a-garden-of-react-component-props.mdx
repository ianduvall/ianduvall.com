---
title: 'Monolithic components: how they form and what to do about them'
description: 'A look at how React components can grow into unweildy beasts'
draft: true
publishedDate: '2021-11-20'
tags: [react, component-design]
---

<link rel="stylesheet" href="/prism.css" />

import { CheckboxGroupAttempt1, CheckboxGroupAttempt2 } from '@/components/posts/CheckboxGroup';

In my time working with React I've noticed a pattern of how React components tend to grow over time. First, a developer is tasked with building a UI for a particular use case. For instance, let's say we are asked to build a UI that displays a group of selectable options. Seems pretty simple. Let's see what we can come up with.

```tsx
interface CheckboxGroupProps {
  items: ReadonlyArray<{
    id: string;
    label: string;
    onChange: () => void;
  }>;
}

const CheckboxGroup = ({ items }: CheckboxGroupProps) => (
  <div
    style={{
      display: 'flex',
      flexDirection: 'column',
      gap: '16px',
    }}
  >
    {items.map((item) => (
      <label key={item.id}>
        {item.label}
        <input type="checkbox" id={id} onChange={item.onChange} />
      </label>
    ))}
  </div>
);

<CheckboxGroup
  items={[
    { id: '1', label: 'Checkbox 1', onChange: () => {} },
    { id: '2', label: 'Checkbox 2', onChange: () => {} },
    { id: '3', label: 'Checkbox 3', onChange: () => {} },
  ]}
/>;
```

<CheckboxGroupAttempt1 />

Looks good, let's ship it. ðŸš¢

The next day a dev from an adjacent team wants to implement the same groups of checkboxes. Not a problem. Let's reuse the code we already have. DRY! Oh but one minor detail, they want to display the checkboxes horizontally on the same row instead of stacked on top of one another. Let's see what they've come up with:

```tsx {7,14}
interface CheckboxGroupProps {
  items: ReadonlyArray<{
    id: string;
    label: string;
    onChange: () => void;
  }>;
  horizontal?: boolean;
}

const CheckboxGroup = ({ items, horizontal }) => (
  <div
    style={{
      display: 'flex',
      flexDirection: horizontal ? 'row' : 'column',
      gap: '16px',
    }}
  >
    {items.map((item) => (
      <label key={item.id}>
        {item.label}
        <input type="checkbox" id={id} onChange={item.onChange} />
      </label>
    ))}
  </div>
);

<CheckboxGroup
  items={[
    { id: '1', label: 'Checkbox 1', onChange: () => {} },
    { id: '2', label: 'Checkbox 2', onChange: () => {} },
    { id: '3', label: 'Checkbox 3', onChange: () => {} },
  ]}
/>;
```

<CheckboxGroupAttempt2 />
